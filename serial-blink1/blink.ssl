$$$
#include <stdio.h>

void printInt(ssm_value_t v)
{
  printf("%d\n", ssm_unmarshal(v));  
}
$$$

main a b =
  let timer = new ()
  let count = new 0
  after 3000000, timer <- ()
  wait timer
  $printInt(deref count)
  loop
    after 1000000, timer <- ()
    wait timer
    $printInt(deref count)
    count <- deref count + 1
  